@page "/portfolio"
@inject HttpClient Http
@using Microsoft.AspNetCore.Authorization
@using Microsoft.AspNetCore.Components.WebAssembly.Authentication
@using ProjectForex.Shared
@attribute [Authorize]

<h3>Portfolio</h3>


@if (accountMain != null)
{
    <BSAlert Color="Color.Primary">
    <p> Open Trade</p>
</BSAlert>
    <p>Last Transaction id: @accountMain.lastTransactionID</p>

    @* <table class="table">

            <thead>
                <tr>
                    <th>Instrument</th>
                    <th>ID</th>
                    <th>Current Units</th>
                    <th>Open Time</th>
                    <th>Price</th>
                    <th>Market Status</th>

                </tr>
            </thead>

            <tbody>
                @foreach (var openTrade in accountMain.trades)
                {
                    <tr>
                        <td>@openTrade.instrument</td>
                        <td>@openTrade.id</td>
                        <td>@openTrade.currentUnits</td>
                        <td>@openTrade.openTime</td>
                        <td>@openTrade.price</td>
                        <td>@openTrade.state</td>
                    </tr>
                }
            </tbody>


        </table>*@

    <BSButton Color="Color.Primary" OnClick="onclick">Open Trade</BSButton>
    <BSCollapse IsOpen="@IsOpen">
        <BSCard CardType="CardType.Card">
            <BSCard CardType="CardType.Text">
                <table class="table">

                    <thead>
                        <tr>
                            <th>Instrument</th>
                            <th>ID</th>
                            <th>Current Units</th>
                            <th>Open Time</th>
                            <th>Price</th>
                            <th>Market Status</th>

                        </tr>
                    </thead>

                    <tbody>
                        @foreach (var openTrade in accountMain.trades)
                        {
                            <tr>
                                <td>@openTrade.instrument</td>
                                <td>@openTrade.id</td>
                                <td>@openTrade.currentUnits</td>
                                <td>@openTrade.openTime</td>
                                <td>@openTrade.price</td>
                                <td>@openTrade.state</td>
                            </tr>
                        }
                    </tbody>


                </table>

            </BSCard>
        </BSCard>
    </BSCollapse>


    }
    else
    {
    <p>Null</p>
    }

    @code {
        bool IsOpen { get; set; }
        void onclick(MouseEventArgs e)
        {
            IsOpen = !IsOpen;
            StateHasChanged();
        }
    }
